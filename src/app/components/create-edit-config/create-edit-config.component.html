<div class="page-container u-flex-column u-flex-center">

    <!-- ROW 1-->
    <div class="u-width-100 u-margin-top-10 u-margin-bottom-10 u-flex-space-between">
        <div class="u-flex-align-center">
            <button class="u-margin-right-10"
                    mat-raised-button color="primary" (click)="back()">

                <mat-icon>arrow_back_ios</mat-icon>
                Back
            </button>
            <div class="u-margin-left-20">
                <h2 *ngIf="!param_configId">New Config</h2>
                <h2 *ngIf="param_configId">Edit Config</h2>
            </div>
        </div>



        <div>
            <div *ngIf="isSaving && !noIdError && !isError && !isLoading"
                 class="u-flex-align-center">
                <mat-spinner class="u-margin-right-10"
                             color="primary"
                             [diameter]="24"></mat-spinner>
                <h2>
                    Saving
                </h2>

            </div>

            <div *ngIf="!isSaving && !isError && !isLoading && !noIdError"
                 class="u-flex-align-center">
                <mat-icon class="u-margin-right-10"
                          color="primary">check_box
                </mat-icon>
                <h2>
                    Saved
                </h2>
            </div>

            <div *ngIf="noIdError"
                 class="u-flex-align-center">
                <mat-icon class="u-margin-right-10"
                          color="secondary">warning_amber
                </mat-icon>
                <h2>
                    Please specify ID to save this config
                </h2>
            </div>
        </div>
    </div>

    <!-- ROW 2-->
    <div class="u-flex u-flex u-flex-space-around main-content-container">
        <div class="u-flex-column u-flex-align-start">
            <mat-form-field class="input-width"
                            appearance="outline">
                <mat-label>Device Brand</mat-label>
                <input matInput [(ngModel)]="configContainer.deviceBrand">
            </mat-form-field>

            <mat-form-field class="input-width"
                            appearance="outline">
                <mat-label>Device Name</mat-label>
                <input matInput [(ngModel)]="configContainer.deviceName">
            </mat-form-field>

            <mat-form-field class="input-width"
                            appearance="outline">
                <mat-label>ID</mat-label>
                <input matInput [value]="getConfigIDs()">
            </mat-form-field>
        </div>

        <div *ngIf="!isLoading && !isError;"
             class="u-margin-bottom-10 u-width-50">

            <button class="u-margin-right-10"
                    mat-raised-button color="primary" (click)="addId()">Set ID
            </button>
            <button class="u-margin-right-10"
                    mat-raised-button color="primary" (click)="addValue()">Add Value
            </button>

            <div
                    class="json-editor-container u-margin-top-10">
                <json-editor [options]="editorOptions"
                             [data]="configContainer.config"
                             (change)="jsonChanged($event)">
                </json-editor>
            </div>
        </div>

        <div *ngIf="isLoading">
            <ng-container [ngTemplateOutlet]="loadingSpinner"></ng-container>
        </div>

        <div *ngIf="isError" class="u-flex-center u-flex-align-center u-margin-top-10">
            <h2>
                Error loading config for ID "{{ param_configId }}"
            </h2>
        </div>
    </div>
</div>


<ng-template #loadingSpinner>
    <div class="u-margin-20">
        <mat-spinner></mat-spinner>
    </div>
</ng-template>
